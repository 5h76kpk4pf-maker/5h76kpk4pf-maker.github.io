<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#667eea,#764ba2);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.card{
  background:white;
  width:350px;
  padding:30px;
  border-radius:15px;
  box-shadow:0 15px 40px rgba(0,0,0,0.2);
  text-align:center;
}

input{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ddd;
}

button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-size:15px;
}

.signup{background:#667eea;color:white;}
.login{background:#764ba2;color:white;}
.logout{background:#e74c3c;color:white;}

.message{
  margin-top:15px;
  font-size:14px;
}

.hidden{display:none;}
</style>
</head>
<body>

<div class="card">

<div id="authBox">
<h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ / ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h2>

<input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
<input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

<button class="signup" id="signup">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
<button class="login" id="login">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>

<p class="message" id="message"></p>
</div>

<div id="dashboard" class="hidden">
<h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ ğŸ‘‹</h2>
<p id="userEmail"></p>
<button class="logout" id="logout">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "my-login-app-c657b.firebaseapp.com",
  projectId: "my-login-app-c657b",
  storageBucket: "my-login-app-c657b.firebasestorage.app",
  messagingSenderId: "212822743589",
  appId: "1:212822743589:web:b3417be9f21f7287c9fdcc"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const message = document.getElementById("message");

function showMessage(text,color="green"){
  message.style.color = color;
  message.innerText = text;
}

function validate(email,password){
  if(!email.includes("@")){
    showMessage("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­ âŒ","red");
    return false;
  }
  if(password.length < 6){
    showMessage("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ğŸ”","red");
    return false;
  }
  return true;
}

function translateError(error){
  switch(error.code){
    case "auth/weak-password":
      return "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹";
    case "auth/email-already-in-use":
      return "Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ ğŸ“§";
    case "auth/invalid-email":
      return "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­ âŒ";
    case "auth/user-not-found":
      return "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯";
    case "auth/wrong-password":
      return "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
    case "auth/invalid-credential":
      return "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
    default:
      return "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹";
  }
}

document.getElementById("signup").onclick = async () => {
  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();

  if(!validate(email,password)) return;

  try{
    await createUserWithEmailAndPassword(auth,email,password);
    showMessage("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ ğŸ”¥");
  }catch(error){
    showMessage(translateError(error),"red");
  }
};

document.getElementById("login").onclick = async () => {
  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();

  if(!validate(email,password)) return;

  try{
    await signInWithEmailAndPassword(auth,email,password);
    showMessage("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ”¥");
  }catch(error){
    showMessage(translateError(error),"red");
  }
};

document.getElementById("logout").onclick = async () => {
  await signOut(auth);
};

onAuthStateChanged(auth, (user)=>{
  if(user){
    document.getElementById("authBox").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
    document.getElementById("userEmail").innerText = user.email;
  }else{
    document.getElementById("authBox").classList.remove("hidden");
    document.getElementById("dashboard").classList.add("hidden");
  }
});

</script>
</body>
</html>
