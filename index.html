<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Auth System</title>

<style>
  body{
    margin:0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#667eea,#764ba2);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
  }

  .card{
    background:white;
    padding:30px;
    width:350px;
    border-radius:15px;
    box-shadow:0 15px 35px rgba(0,0,0,0.2);
    text-align:center;
  }

  h2{ margin-bottom:20px; }

  input{
    width:100%;
    padding:12px;
    margin:8px 0;
    border-radius:8px;
    border:1px solid #ddd;
    font-size:14px;
  }

  button{
    width:100%;
    padding:12px;
    margin-top:10px;
    border:none;
    border-radius:8px;
    font-size:15px;
    cursor:pointer;
    transition:0.3s;
  }

  .signup{ background:#667eea; color:white; }
  .login{ background:#764ba2; color:white; }
  .logout{ background:#e74c3c; color:white; }

  button:hover{ opacity:0.9; }

  .message{
    margin-top:15px;
    font-size:14px;
  }

  .hidden{ display:none; }
</style>
</head>
<body>

<div class="card">

  <div id="authBox">
    <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ / ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h2>

    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">

    <button class="signup" id="signup">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    <button class="login" id="login">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>

    <p class="message" id="message"></p>
  </div>

  <div id="dashboard" class="hidden">
    <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ ðŸ‘‹</h2>
    <p id="userEmail"></p>
    <button class="logout" id="logout">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  </div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "my-login-app-c657b.firebaseapp.com",
  projectId: "my-login-app-c657b",
  storageBucket: "my-login-app-c657b.firebasestorage.app",
  messagingSenderId: "212822743589",
  appId: "1:212822743589:web:b3417be9f21f7287c9fdcc"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const message = document.getElementById("message");

function showMessage(text,color="green"){
  message.style.color = color;
  message.innerText = text;
}

// ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
function validate(email,password){
  if(!email.includes("@")){
    showMessage("Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­","red");
    return false;
  }
  if(password.length < 6){
    showMessage("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„","red");
    return false;
  }
  return true;
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
document.getElementById("signup").onclick = async () => {
  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();

  if(!validate(email,password)) return;

  try{
    await createUserWithEmailAndPassword(auth,email,password);
    showMessage("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ ðŸ”¥");
  }catch(error){
    showMessage(error.message,"red");
  }
};

// ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
document.getElementById("login").onclick = async () => {
  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();

  if(!validate(email,password)) return;

  try{
    await signInWithEmailAndPassword(auth,email,password);
    showMessage("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ðŸ”¥");
  }catch(error){
    showMessage("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©","red");
  }
};

// ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
document.getElementById("logout").onclick = async () => {
  await signOut(auth);
};

// Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
onAuthStateChanged(auth, (user)=>{
  if(user){
    document.getElementById("authBox").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
    document.getElementById("userEmail").innerText = user.email;
  }else{
    document.getElementById("authBox").classList.remove("hidden");
    document.getElementById("dashboard").classList.add("hidden");
  }
});

</script>
</body>
</html>
