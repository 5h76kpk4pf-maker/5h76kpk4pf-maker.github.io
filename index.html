<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ุชุณุฌูู ุงูุฏุฎูู</title>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword, 
  signInWithEmailAndPassword,
  sendPasswordResetEmail
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCeUwV0zghn9GkfJWqFWS-6L2NmLxyM7NE",
  authDomain: "my-login-app-c657b.firebaseapp.com",
  projectId: "my-login-app-c657b",
  storageBucket: "my-login-app-c657b.firebasestorage.app",
  messagingSenderId: "212822743589",
  appId: "1:212822743589:web:b9dbdbcf82a9c05fc9fdcc",
  measurementId: "G-CMF6QJ9HF9"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

window.register = function () {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const messageBox = document.getElementById("message");

  createUserWithEmailAndPassword(auth, email, password)
    .then(() => {
      messageBox.style.color = "green";
      messageBox.innerText = "โ ุชู ุฅูุดุงุก ุงูุญุณุงุจ";
      setTimeout(() => {
        window.location.href = "home.html";
      }, 1500);
    })
    .catch((error) => {
      if (error.code === "auth/email-already-in-use") {
        messageBox.style.color = "red";
        messageBox.innerText = "โ ุงูุจุฑูุฏ ูุณุชุฎุฏู ูุณุจููุง";
      } else {
        messageBox.style.color = "red";
        messageBox.innerText = "โ ุญุฏุซ ุฎุทุฃ";
      }
    });
};

window.login = function () {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const messageBox = document.getElementById("message");

  signInWithEmailAndPassword(auth, email, password)
    .then(() => {
      messageBox.style.color = "green";
      messageBox.innerText = "โ ุชู ุชุณุฌูู ุงูุฏุฎูู";
      setTimeout(() => {
        window.location.href = "home.html";
      }, 1500);
    })
    .catch(() => {
      messageBox.style.color = "red";
      messageBox.innerText = "โ ุจูุงูุงุช ุงูุฏุฎูู ุบูุฑ ุตุญูุญุฉ";
    });
};

window.resetPassword = function () {
  const email = document.getElementById("email").value;
  const messageBox = document.getElementById("message");

  sendPasswordResetEmail(auth, email)
    .then(() => {
      messageBox.style.color = "green";
      messageBox.innerText = "๐ฉ ุชู ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู";
    })
    .catch(() => {
      messageBox.style.color = "red";
      messageBox.innerText = "โ ุงูุชุจ ุจุฑูุฏ ุตุญูุญ ุฃููุงู";
    });
};
</script>
</head>

<body style="text-align:center;margin-top:100px;font-family:Arial">

<h2>ุชุณุฌูู ุงูุฏุฎูู</h2>

<input id="email" type="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"><br><br>
<input id="password" type="password" placeholder="ูููุฉ ุงููุฑูุฑ"><br><br>

<button onclick="login()">ุฏุฎูู</button>
<button onclick="register()">ุฅูุดุงุก ุญุณุงุจ</button>
<br><br>
<button onclick="resetPassword()">ูุณูุช ูููุฉ ุงููุฑูุฑุ</button>

<p id="message"></p>

</body>
</html>
